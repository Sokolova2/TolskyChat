= form_with(url: users_path, method: :get, data: {turbo_frame: 'result-search', controller: 'search'}) do |f|
  = f.text_field :search, placeholder: 'Searching...', data: {action: 'input->search#search', search_target: 'input'}, class: 'form-control rounded-5 p-2 text-center search'
  = f.submit 'Search', class: 'btn btn-outline-none', hidden: true

.mt-4
  -@users.each do |user|
    - unless current_user == user || user.deleted_at.present?
      .d-flex.justify-content-between.align-items-center
        = link_to user_path(user), class: "text-decoration-none text-dark" do
          .d-flex.gap-2.align-items-center.mt-2
            = image_tag user.avatar.url(:thumb), size: 50
            %p.mt-1= user.login
        - if Contact.exists?(sender_id: current_user.id, receiver_id: user.id, approved: true)
          In your contacts
        - elsif Contact.exists?(sender_id: current_user.id, receiver_id: user.id, approved: false)
          Pending approval
        -else
          = button_to 'Add to contact', contacts_path, method: :post, params: { receiver_id: user.id }, class: "btn btn-outline-dark"
